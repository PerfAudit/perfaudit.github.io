<!DOCTYPE HTML>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <title>CanIUse.com</title>
  <meta name="keywords" content="performance, audit, rendering, profiling, website, consultant" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Hello folks! This is Perfaudit’s first case study for which we chose caniuse.com. Lets dive in.">

  <link rel="publisher" href="https://google.com/+Perfaudits"/>
  <meta property="og:title" content="CanIUse.com">
  <meta property="og:locale" content="en_US" />
  <meta property="og:type" content="website">
  <meta property="og:description" content="PerfAudit">
  <meta property="og:site_name" content="PerfAudit">
  <meta property="og:url" content="http://perfaudit.com">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="CanIUse.com">
  <meta name="twitter:description" content="PerfAudit">
  <meta name="msapplication-TileColor" content="#008c99">

  <link rel="canonical" href="http://perfaudit.com/case-study/caniuse.com">
  <link rel="alternate" type="application/rss+xml" title="PerfAudit | Performance Audit of Websites by Professionals" href="http://perfaudit.com/feed.xml" />
  <style type="text/css">
    body {
      background-color: #222834;
    }
  </style>
</head>
  <body class="no-sidebar">
    <!-- Header -->
<div id="header-wrapper" class="wrapper">
  <div id="header">

    <!-- Logo -->
      <div id="logo">
        <h1><a href="/">#perfaudit</a></h1>
        <p>Performance audit of Web Applications by Professionals</p>
      </div>

    <!-- Nav -->
      <nav id="nav">
        <ul>
          <li class="current"><a href="index.html">Home</a></li>
          <li><a href="#">Resources</a></li>
          <li><a href="#">Talks</a></li>
          <li><a href="#">Case Studies</a></li>
          <li><a href="#">Blog</a></li>
        </ul>
      </nav>

  </div>
</div>
    <!-- Main -->
<div class="wrapper style2">
  <div class="title">Case Study</div>
  <div id="main" class="container">

    <!-- Content -->
      <div id="content">
        <article class="box post">
          <header class="style1">
            <h2>PerfAudit: CanIUse.com</h2>
          </header>
          <p>Hello folks! This is Perfaudit’s first case study for which we chose <a href="http://caniuse.com/">caniuse.com</a>. Lets dive in.</p>

<h2 id="network-profiling">Network profiling</h2>
<p><img src="/images/2015/03/caniuse-pagespeed.png" alt="Google pagespeed issues" /></p>

<p>As we see, caniuse.com has a google pagespeed score of 84 which is pretty descent. There are few issues pointed out by pagespeed which are mainly due to 3rd party files not leveraging browser caching or coming unminified and uncompressed. These are mostly harmless but still can be fixed by caching these external files on the website itself so as to get full control over them.</p>

<h2 id="after-load-profiling">After load profiling</h2>

<h3 id="issue-janky-scrolling">Issue: Janky scrolling</h3>

<p>On caniuse.com homepage, if you scroll down the page hovering over the list of links, you will experience occasional jerks. That is what we call a “Jank”. Lets try debugging the issue using Google Chrome’s devtool timeline. Running a quick timeline recording, we get the
following graph:</p>

<p><img src="/images/2015/03/caniuse-paint-janks.png" alt="Paint janks" /></p>

<p>This shows that we are shooting our limit due to some paint events. Paint events happen when something needs to be drawn on the page. This means when we are scrolling while hovering over the list, something is being drawn. Yes, its those links changing their color when hovered on. If you were to inspect one of those links and enable the <code>:hover</code> pseudo class on them, you’ll see the culprit style:</p>

<p><img src="/images/2015/03/caniuse-jank-causing-css.png" alt="Jank causing CSS" /></p>

<p>If you disable the <code>color</code> property on <code>:hover</code> and rerun a timeline recording, you’ll notice that there are no more paint events crossing the 60fps bar. Better performance.</p>

<p>To solve this, there is a <a href="http://www.thecssninja.com/css/pointer-events-60fps">neat trick</a> by Ryan Seddon to listen for scroll event and disable pointer events on an element, say <code>&lt;body&gt;</code>, so that mouse dependent paints do not happen:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// JS</span>
<span class="kd">var</span> <span class="nx">timeout</span><span class="p">,</span> <span class="nx">pointerEventsDisabled</span><span class="p">;</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;scroll&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timeout</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">pointerEventsDisabled</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;no-pointer&#39;</span><span class="p">);</span>
    <span class="nx">pointerEventsDisabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">timeout</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">&#39;no-pointer-events&#39;</span><span class="p">);</span>
    <span class="nx">pointerEventsDisabled</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">},</span> <span class="mi">500</span><span class="p">);</span>
<span class="p">})</span></code></pre></div>

<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="o">//</span> <span class="nt">CSS</span>
<span class="nc">.no-pointer-events</span> <span class="p">{</span>
<span class="o">.</span><span class="n">no</span><span class="o">-</span><span class="k">pointer</span><span class="o">-</span><span class="n">events</span> <span class="o">*</span> <span class="err">{</span>
  <span class="k">pointer</span><span class="o">-</span><span class="n">events</span><span class="o">:</span> <span class="k">none</span> <span class="cp">!important</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p>This will essentially disable the pointer events as soon as the scroll starts and enable them half a second after the last scroll event fires.</p>
        </article>
      </div>

  </div>
</div>

    <!-- Highlights -->
<div class="wrapper style3">
  <div class="title">Case Studies</div>
  <div id="highlights" class="container">
    <div class="row 150%">
      <div class="4u">
        <section class="highlight">
          <a href="#" class="image featured"><img src="/images/thumbnails/caniuse.com.jpeg" alt="CanIUse.com PerfAudit" /></a>
          <h3><a href="/case-studies/caniuse.com">CanIUse.com PerfAudit</a></h3>
          <p>Janky performance along with other Rendering Issues on <a href="http://caniuse.com">CanIUse.com</a>.</p>
          <ul class="actions">
            <li><a href="#" class="button style1">Learn More</a></li>
          </ul>
        </section>
      </div>
      <div class="4u">
        <section class="highlight">
          <a href="#" class="image featured"><img src="/images/thumbnails/www.hindustantimes.com.jpeg" alt="" /></a>
          <h3><a href="#">HindustanTimes.com PerfAudit</a></h3>
          <p>Performance Audit for <a href="http://hindustantimes.com">HindustanTimes.com</a> will be published soon.</p>
          <ul class="actions">
            <li><a href="#" class="button style1">Learn More</a></li>
          </ul>
        </section>
      </div>
      <div class="4u">
        <section class="highlight">
          <a href="#" class="image featured"><img src="/images/pic04.jpg" alt="" /></a>
          <h3><a href="#">Your Website</a></h3>
          <p>Submit your Audit request, and we'll help you make perfomant website.</p>
          <ul class="actions">
            <li><a href="mailto:info@perfaudit.com" class="button style1">Submit Audit Request</a></li>
          </ul>
        </section>
      </div>
    </div>
  </div>
</div>
    <!-- Footer -->
<div id="footer-wrapper" class="wrapper">
  <div class="title">Audit Requests</div>
  <div id="footer" class="container">
    <header class="style1">
      <h2>Want us to audit your Website?</h2>
      <p>
        We'll audit the page load and rendering performance of your web application.<br />
        Share your contact and we'll get back to you very soon.
      </p>
    </header>
    <hr />
    <div class="row 150%">
      <div class="6u">

        <!-- Contact Form -->
          <section>
            <form method="post" action="#">
              <div class="row 50%">
                <div class="6u">
                  <input type="text" name="name" id="contact-name" placeholder="Name" />
                </div>
                <div class="6u">
                  <input type="text" name="email" id="contact-email" placeholder="Email" />
                </div>
              </div>
              <div class="row 50%">
                <div class="12u">
                  <textarea name="message" id="contact-message" placeholder="Message" rows="4"></textarea>
                </div>
              </div>
              <div class="row">
                <div class="12u">
                  <ul class="actions">
                    <li><input type="submit" class="style1" value="Send" /></li>
                    <li><input type="reset" class="style2" value="Reset" /></li>
                  </ul>
                </div>
              </div>
            </form>
          </section>

      </div>
      <div class="6u">

        <!-- Contact -->
          <section class="feature-list small">
            <div class="row">
              <div class="6u">
                <section>
                  <h3 class="icon fa-envelope">Email</h3>
                  <p>
                    <a href="#">info@perfaudit.com</a>
                  </p>
                </section>
              </div>
              <div class="6u">
                <section>
                  <h3 class="icon fa-comment">Social</h3>
                  <p>
                    <a href="https://plus.google.com/+PerfAudits">Google+</a><br />
                    <a href="https://youtube.com/c/perfaudits">Youtube</a><br />
                  </p>
                </section>
              </div>
            </div>
          </section>
      </div>
    </div>
    <hr />
  </div>
  <div id="copyright">
    <ul>
      <li>#perfaudit</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
    </ul>
  </div>
</div>
<!--[if lte IE 8]><script src="/css/ie/html5shiv.js"></script><![endif]-->
<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.dropotron.min.js"></script>
<script src="/js/skel.min.js"></script>
<script src="/js/skel-layers.min.js"></script>
<script src="/js/init.js"></script>
<noscript>
  <link rel="stylesheet" href="/css/skel.css" />
  <link rel="stylesheet" href="/css/style.css" />
  <link rel="stylesheet" href="/css/style-desktop.css" />
</noscript>
<!--[if lte IE 8]><link rel="stylesheet" href="/css/ie/v8.css" /><![endif]-->
  </body>
</html>